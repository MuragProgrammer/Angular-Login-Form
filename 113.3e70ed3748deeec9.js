"use strict";(self.webpackChunkangular_registration_login_example=self.webpackChunkangular_registration_login_example||[]).push([[113],{2113:(w,p,a)=>{a.r(p),a.d(p,{UsersModule:()=>S});var o=a(4341),m=a(177),d=a(7372),t=a(4438);let _=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"router-outlet"),t.k0s()())},dependencies:[d.n3],encapsulation:2})}}return e})();var c=a(1594),u=a(9157);function b(e,n){1&e&&t.nrm(0,"span",10)}function g(e,n){1&e&&(t.j41(0,"span"),t.EFF(1,"Delete"),t.k0s())}function v(e,n){if(1&e){const s=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",6)(8,"a",7),t.EFF(9,"Edit"),t.k0s(),t.j41(10,"button",8),t.bIt("click",function(){const r=t.eBV(s).$implicit,f=t.XpG();return t.Njj(f.deleteUser(r.id))}),t.DNE(11,b,1,0,"span",9)(12,g,2,0,"span",5),t.k0s()()()}if(2&e){const s=n.$implicit;t.R7$(2),t.JRh(s.firstName),t.R7$(2),t.JRh(s.lastName),t.R7$(2),t.JRh(s.username),t.R7$(2),t.Mz_("routerLink","edit/",s.id,""),t.R7$(2),t.Y8G("disabled",s.isDeleting),t.R7$(),t.Y8G("ngIf",s.isDeleting),t.R7$(),t.Y8G("ngIf",!s.isDeleting)}}function F(e,n){1&e&&(t.j41(0,"tr")(1,"td",11),t.nrm(2,"span",12),t.k0s()())}let k=(()=>{class e{constructor(s){this.accountService=s}ngOnInit(){this.accountService.getAll().pipe((0,c.$)()).subscribe(s=>this.users=s)}deleteUser(s){this.users.find(r=>r.id===s).isDeleting=!0,this.accountService.delete(s).pipe((0,c.$)()).subscribe(()=>this.users=this.users.filter(r=>r.id!==s))}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(u.D))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:17,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","me-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(i,r){1&i&&(t.j41(0,"h1"),t.EFF(1,"Users"),t.k0s(),t.j41(2,"a",0),t.EFF(3,"Add User"),t.k0s(),t.j41(4,"table",1)(5,"thead")(6,"tr")(7,"th",2),t.EFF(8,"First Name"),t.k0s(),t.j41(9,"th",2),t.EFF(10,"Last Name"),t.k0s(),t.j41(11,"th",2),t.EFF(12,"Username"),t.k0s(),t.nrm(13,"th",3),t.k0s()(),t.j41(14,"tbody"),t.DNE(15,v,13,8,"tr",4)(16,F,3,0,"tr",5),t.k0s()()),2&i&&(t.R7$(15),t.Y8G("ngForOf",r.users),t.R7$(),t.Y8G("ngIf",!r.users))},dependencies:[m.Sq,m.bT,d.Wk],encapsulation:2})}}return e})();const l=e=>({"is-invalid":e});function E(e,n){1&e&&(t.j41(0,"div"),t.EFF(1,"First Name is required"),t.k0s())}function C(e,n){if(1&e&&(t.j41(0,"div",16),t.DNE(1,E,2,0,"div",10),t.k0s()),2&e){const s=t.XpG(2);t.R7$(),t.Y8G("ngIf",s.f.firstName.errors.required)}}function j(e,n){1&e&&(t.j41(0,"div"),t.EFF(1,"Last Name is required"),t.k0s())}function N(e,n){if(1&e&&(t.j41(0,"div",16),t.DNE(1,j,2,0,"div",10),t.k0s()),2&e){const s=t.XpG(2);t.R7$(),t.Y8G("ngIf",s.f.lastName.errors.required)}}function G(e,n){1&e&&(t.j41(0,"div"),t.EFF(1,"Username is required"),t.k0s())}function R(e,n){if(1&e&&(t.j41(0,"div",16),t.DNE(1,G,2,0,"div",10),t.k0s()),2&e){const s=t.XpG(2);t.R7$(),t.Y8G("ngIf",s.f.username.errors.required)}}function $(e,n){1&e&&(t.j41(0,"em"),t.EFF(1,"(Leave blank to keep the same password)"),t.k0s())}function I(e,n){1&e&&(t.j41(0,"div"),t.EFF(1,"Password is required"),t.k0s())}function x(e,n){1&e&&(t.j41(0,"div"),t.EFF(1,"Password must be at least 6 characters"),t.k0s())}function U(e,n){if(1&e&&(t.j41(0,"div",16),t.DNE(1,I,2,0,"div",10)(2,x,2,0,"div",10),t.k0s()),2&e){const s=t.XpG(2);t.R7$(),t.Y8G("ngIf",s.f.password.errors.required),t.R7$(),t.Y8G("ngIf",s.f.password.errors.minlength)}}function T(e,n){1&e&&t.nrm(0,"span",17)}function Y(e,n){if(1&e){const s=t.RV6();t.j41(0,"form",2),t.bIt("ngSubmit",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.onSubmit())}),t.j41(1,"div",3)(2,"div",4)(3,"label",5),t.EFF(4,"First Name"),t.k0s(),t.nrm(5,"input",6),t.DNE(6,C,2,1,"div",7),t.k0s(),t.j41(7,"div",4)(8,"label",5),t.EFF(9,"Last Name"),t.k0s(),t.nrm(10,"input",8),t.DNE(11,N,2,1,"div",7),t.k0s()(),t.j41(12,"div",3)(13,"div",4)(14,"label",5),t.EFF(15,"Username"),t.k0s(),t.nrm(16,"input",9),t.DNE(17,R,2,1,"div",7),t.k0s(),t.j41(18,"div",4)(19,"label",5),t.EFF(20," Password "),t.DNE(21,$,2,0,"em",10),t.k0s(),t.nrm(22,"input",11),t.DNE(23,U,3,2,"div",7),t.k0s()(),t.j41(24,"div",12)(25,"button",13),t.DNE(26,T,1,0,"span",14),t.EFF(27," Save "),t.k0s(),t.j41(28,"a",15),t.EFF(29,"Cancel"),t.k0s()()()}if(2&e){const s=t.XpG();t.Y8G("formGroup",s.form),t.R7$(5),t.Y8G("ngClass",t.eq3(12,l,s.submitted&&s.f.firstName.errors)),t.R7$(),t.Y8G("ngIf",s.submitted&&s.f.firstName.errors),t.R7$(4),t.Y8G("ngClass",t.eq3(14,l,s.submitted&&s.f.lastName.errors)),t.R7$(),t.Y8G("ngIf",s.submitted&&s.f.lastName.errors),t.R7$(5),t.Y8G("ngClass",t.eq3(16,l,s.submitted&&s.f.username.errors)),t.R7$(),t.Y8G("ngIf",s.submitted&&s.f.username.errors),t.R7$(4),t.Y8G("ngIf",s.id),t.R7$(),t.Y8G("ngClass",t.eq3(18,l,s.submitted&&s.f.password.errors)),t.R7$(),t.Y8G("ngIf",s.submitted&&s.f.password.errors),t.R7$(2),t.Y8G("disabled",s.submitting),t.R7$(),t.Y8G("ngIf",s.submitting)}}function D(e,n){1&e&&(t.j41(0,"div",18),t.nrm(1,"span",19),t.k0s())}let h=(()=>{class e{constructor(s,i,r,f,L){this.formBuilder=s,this.route=i,this.router=r,this.accountService=f,this.alertService=L,this.loading=!1,this.submitting=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({firstName:["",o.k0.required],lastName:["",o.k0.required],username:["",o.k0.required],password:["",[o.k0.minLength(6),...this.id?[]:[o.k0.required]]]}),this.title="Add User",this.id&&(this.title="Edit User",this.loading=!0,this.accountService.getById(this.id).pipe((0,c.$)()).subscribe(s=>{this.form.patchValue(s),this.loading=!1}))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveUser().pipe((0,c.$)()).subscribe({next:()=>{this.alertService.success("User saved",{keepAfterRouteChange:!0}),this.router.navigateByUrl("/users")},error:s=>{this.alertService.error(s),this.submitting=!1}}))}saveUser(){return this.id?this.accountService.update(this.id,this.form.value):this.accountService.register(this.form.value)}static{this.\u0275fac=function(i){return new(i||e)(t.rXU(o.ok),t.rXU(d.nX),t.rXU(d.Ix),t.rXU(u.D),t.rXU(u.u))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["ng-component"]],decls:4,vars:3,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","text-center m-5",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"mb-3","col"],[1,"form-label"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["type","text","formControlName","username",1,"form-control",3,"ngClass"],[4,"ngIf"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"mb-3"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm me-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"spinner-border","spinner-border-sm","me-1"],[1,"text-center","m-5"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(i,r){1&i&&(t.j41(0,"h1"),t.EFF(1),t.k0s(),t.DNE(2,Y,30,20,"form",0)(3,D,2,0,"div",1)),2&i&&(t.R7$(),t.JRh(r.title),t.R7$(),t.Y8G("ngIf",!r.loading),t.R7$(),t.Y8G("ngIf",r.loading))},dependencies:[m.YU,m.bT,o.qT,o.me,o.BC,o.cb,o.j4,o.JD,d.Wk],encapsulation:2})}}return e})();const y=[{path:"",component:_,children:[{path:"",component:k},{path:"add",component:h},{path:"edit/:id",component:h}]}];let A=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(y),d.iI]})}}return e})(),S=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[m.MD,o.X1,A]})}}return e})()}}]);